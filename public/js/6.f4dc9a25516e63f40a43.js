(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{CEe0:function(t,e,s){(t.exports=s("I1BE")(!1)).push([t.i,"#tasks-table table[data-v-245d889d],table td .details-textarea[data-v-245d889d]{width:100%;height:100%}.details-td[data-v-245d889d]{padding:0!important}.back-title[data-v-245d889d]{padding:5px}",""])},Pg0s:function(t,e,s){"use strict";s.r(e);var a=s("jED+"),n=s("afzW"),o=s("9RQC"),i=s("LZtv"),r={mixins:[a.a,Object(n.a)("app/projects")],props:["modal","customerId","customerName"],data:function(){return{showTaskList:!1,showProjectForm:!1,projectId:null,projectName:null,columns:["name","customer","start_date","end_date","price","expenses","type","percentage_done","actions"],filters:new this.$form({name:"",company:"",email:"",phone:"",balance:!1,range:0}),addRoute:null,options:{orderBy:{ascending:!0,column:"name"},sortable:["name","start_date","end_date","priority"],editableColumns:["details"],perPage:10,columnsClasses:{id:"w50 has-text-centered",receivable:"w125 has-text-right",actions:"w175 has-text-centered p-x-none",details:"details-td"},filterable:["name","start_date","end_date","details"],headings:{name:"שם",customer:"לקוח",start_date:"תחילת עסודה",end_date:"סיום עבודה",type:"סוג",date_to_complete:"תאריך התחלה",actual_time:"תאריך סיום",price:"מחיר",expenses:"הוצאות",actions:"פעולות",percentage_done:"אחוז מהעבודה עד כה"}}}},methods:{showTasks:function(t,e){this.projectId=t,this.projectName=e,this.showTaskList=!0},showProjectsList:function(){this.showTaskList=!1},editDetails:function(t){var e=t.target.id.replace(/[^\d.]/g,"");this.$http("app/projects/details/".concat(t.target.value,"/").concat(e)).then()},goBack:function(){},percentageCalculation:function(t,e){if(t){var s=100*(t.reduce((function(t,e){return t+e}),0)/60)/e;if(Number.isFinite(s))return" % "+100*s}}},created:function(){this.showTaskList=!1,this.addRoute=this.customerId?"/projects/add?customerId=".concat(this.customerId):"/projects/add"},computed:{url:{get:function(){return this.customerId?"app/customers/projects/".concat(this.customerId):"app/projects"}}},components:{DateFormatComponent:o.a,TaskListComponent:i.default}},c=(s("efi/"),s("KHd+")),l=Object(c.a)(r,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[t.showTaskList?t._e():s("div",{staticClass:"wrapper"},[s("div",{staticClass:"panel panel-default"},[s("div",{staticClass:"panel-heading"},[t.customerName?s("button",{staticClass:"button is-primary is-small is-pulled-right",on:{click:t.goBack}},[s("p",{staticClass:"back-title"},[t._v(" חזרה ")]),t._v(" "),s("i",{staticClass:"fas fa-backward"})]):t._e(),t._v(" "),s("button",{staticClass:"button is-primary is-small is-pulled-right m-l-sm is-hidden-desktop",on:{click:function(e){t.filtering=!t.filtering}}},[s("i",{staticClass:"fas fa-cog"})]),t._v(" "),s("router-link",{staticClass:"button is-link is-small is-pulled-right",attrs:{to:t.addRoute}},[s("i",{staticClass:"fas fa-plus m-l-sm"}),t._v(" הוספת פרויקט\n      ")]),t._v("\n      פרוייקטים\n      "),t.customerId?s("span",[t._v(" עבור : "),s("strong",[t._v(t._s(t.customerName))])]):t._e()],1),t._v(" "),s("div",{staticClass:"panel-block table-body-br"},[s("v-server-table",{ref:"projectsTable",attrs:{id:"projects-table",url:t.url,columns:t.columns,options:t.options,name:"projectsTable"},scopedSlots:t._u([{key:"customer",fn:function(e){return[s("div",{staticClass:"has-text-centered"},[t._v("\n            "+t._s(e.row.customer?e.row.customer.name:"")+"\n          ")])]}},{key:"start_date",fn:function(t){return[s("date-format-component",{attrs:{dateTime:t.row.start_date}})]}},{key:"end_date",fn:function(t){return[s("date-format-component",{attrs:{dateTime:t.row.end_date}})]}},{key:"type",fn:function(e){return[s("div",{staticClass:"has-text-centered"},[t._v("\n            "+t._s(e.row.type?e.row.type.name:"")+"\n          ")])]}},{key:"percentage_done",fn:function(e){return[s("div",{staticClass:"has-text-centered"},[t._v("\n\n            "+t._s(t.percentageCalculation(e.row.actual_time,e.row.price))+"\n          ")])]}},{key:"actions",fn:function(e){return[s("div",{staticClass:"buttons has-addons is-centered"},[s("p",{staticClass:"control tooltip"},[s("router-link",{staticClass:"button is-primary is-small",attrs:{to:"/projects/"+e.row.id}},[s("i",{staticClass:"fas fa-file-alt"}),t._v(" "),s("span",{staticClass:"tooltip-text"},[t._v("צפייה")])])],1),t._v(" "),s("p",{staticClass:"control tooltip"},[s("a",{staticClass:"fas fa-list button is-info is-small",on:{click:function(s){return t.showTasks(e.row.id,e.row.name)}}},[s("span",{staticClass:"tooltip-text bottom"},[t._v(" רשימת משימות")])])]),t._v(" "),t.$store.getters.admin?s("p",{staticClass:"control tooltip"},[s("router-link",{staticClass:"button is-warning is-small",attrs:{to:"/projects/edit/"+e.row.id}},[s("i",{staticClass:"fas fa-edit"}),t._v(" "),s("span",{staticClass:"tooltip-text"},[t._v("עריכה")])])],1):t._e(),t._v(" "),t.$store.getters.superAdmin?s("p",{staticClass:"control tooltip"},[s("button",{staticClass:"button is-danger is-small",attrs:{type:"button"},on:{click:function(s){return t.deleteRecord(e.row.id)}}},[s("i",{staticClass:"fas fa-trash"}),t._v(" "),s("span",{staticClass:"tooltip-text"},[t._v("מחיקה")])])]):t._e()])]}}],null,!1,1860042847)},[t._v(" "),t._v(" "),t._v(" "),t._v(" "),t._v("\n        percentageCalculation\n\n        ")])],1)]),t._v(" "),t.filtering?s("panel-filters-component",{class:{loaded:t.filtering},attrs:{filters:t.filters},on:{"hide-panel-filters":function(e){t.filtering=!1}}}):t._e(),t._v(" "),s("router-view")],1),t._v(" "),t.showTaskList?s("div",[s("task-list-component",{attrs:{projectName:t.projectName,projectId:t.projectId,modal:"projects"},on:{showProjectsList:t.showProjectsList}})],1):t._e()])}),[],!1,null,"245d889d",null);e.default=l.exports},XY4E:function(t,e,s){var a=s("CEe0");"string"==typeof a&&(a=[[t.i,a,""]]);var n={hmr:!0,transform:void 0,insertInto:void 0};s("aET+")(a,n);a.locals&&(t.exports=a.locals)},"efi/":function(t,e,s){"use strict";var a=s("XY4E");s.n(a).a}}]);